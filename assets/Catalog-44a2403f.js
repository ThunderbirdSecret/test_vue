import{_ as p,o as r,c as _,a as n,r as f,d as g,j as b,v as u,F as C,f as $,k as S,l as k,g as B,t as d,p as w,i as x,e as m,m as P,h}from"./index-8b54ba58.js";const I=""+new URL("icon-arrow-edb68e0a.svg",import.meta.url).href;const A={name:"BackButton",methods:{navigate(){this.$router.replace({path:"/"})}}},N=n("img",{class:"back__button__img",src:I,alt:"back"},null,-1),R=[N];function V(o,a,t,e,i,l){return r(),_("button",{class:"back__button",type:"button",onClick:a[0]||(a[0]=(...c)=>l.navigate&&l.navigate(...c))},R)}const F=p(A,[["render",V]]);const L={name:"Sidebar",setup(){const o=k(),a=B(),t=f([]),e=f([]),i=g(()=>a.state.products),l=g(()=>a.state.filter);e.value=i.products,b(async()=>{if(!e.value)for(;!e.value;)try{e.value=await a.dispatch("products/getProducts",{city_id:u.city_id})}catch(v){console.log(v)}const y=e.value.filter(v=>v.slug===o.params.slug);t.value=y[0],u.category_title=await t.value.name});async function c(s){return await a.dispatch("catalog/getCatalog",{city_id:u.city_id,slug:s})}return{currentTag:t,catalogArr:l,filterCatalog:c,productsArr:e}}},T={class:"sidebar"},j={class:"sidebar__list"},D=["onClick"];function E(o,a,t,e,i,l){return r(),_("nav",T,[n("ul",j,[n("li",{class:"sidebar__list__el",onClick:a[0]||(a[0]=c=>e.filterCatalog(o.$route.params.slug))},"Все Продукты"),e.productsArr?(r(!0),_(C,{key:0},$(e.currentTag.children,c=>(r(),_("li",{class:"sidebar__list__el",key:c.id,onClick:s=>e.filterCatalog(c.slug)},d(c.name),9,D))),128)):S("",!0)])])}const M=p(L,[["render",E]]);const U={name:"ProductCard",props:{image:{type:String},category:{type:String},present:{type:String},comment:{type:String},price:{type:Number},allowed:{type:Boolean},available:{type:Boolean}}},q=o=>(w("data-v-616ba7df"),o=o(),x(),o),z={key:0,сlass:"сategory",id:"сategory"},G=["src"],H={key:0,class:"сategory__btn__true"},J={key:1,class:"сategory__btn__false"},K={key:1},O=q(()=>n("h2",null,"Ой, вас наебали!",-1)),Q=[O];function W(o,a,t,e,i,l){return t.category||t.present?(r(),_("div",z,[n("img",{src:t.image,class:"сategory__img",alt:"imd"},null,8,G),n("span",null,d(t.category),1),n("h4",null,d(t.present),1),n("p",null,d(t.comment),1),n("h4",null,d(t.price)+" ₽",1),t.allowed&&t.available?(r(),_("button",H,"В корзину")):(r(),_("button",J,"Нет в наличии"))])):(r(),_("div",K,Q))}const X=p(U,[["render",W],["__scopeId","data-v-616ba7df"]]);const Y={name:"CategoryCards",components:{ProductCard:X},setup(){const o=f([]),a=B(),t=k();return b(async()=>{try{return await a.dispatch("catalog/getCatalog",{city_id:u.city_id,slug:t.params.slug})}catch(e){console.log(e)}}),{dataArr:o,updRouter:g(()=>o.value=t.params.slug),updStore:g(()=>a.state.catalog)}}},Z={class:"CategoryCard"};function tt(o,a,t,e,i,l){const c=m("ProductCard");return r(),_("div",Z,[(r(!0),_(C,null,$(e.updStore.catalog.products,s=>(r(),P(c,{image:s.main_image_thumb_300,category:s.category.name,present:s.present_name,comment:s.comment_name,price:s.price,allowed:s.allowed,available:s.available},null,8,["image","category","present","comment","price","allowed","available"]))),256))])}const et=p(Y,[["render",tt]]);const at={name:"Catalog",components:{Sidebar:M,BackButton:F,CategoryCards:et},setup(){return{elCatalog:g(()=>u.category_title)}}},ot={class:"catalog"},st={сlass:"catalog__top",id:"top"},nt={class:"catalog__top__title"},ct={class:"catalog__content"},rt={class:"catalog__content__sidebar"};function _t(o,a,t,e,i,l){const c=m("BackButton"),s=m("Sidebar"),y=m("CategoryCards");return r(),_("div",ot,[n("div",st,[h(c),n("h3",nt,d(e.elCatalog),1)]),n("div",ct,[n("div",rt,[h(s)]),h(y)])])}const it=p(at,[["render",_t],["__scopeId","data-v-6a197f1d"]]);export{it as default};
